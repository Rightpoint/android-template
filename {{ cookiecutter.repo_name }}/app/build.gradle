import dependencies.Libraries

apply plugin: 'com.android.application'
apply plugin: 'android-config'
apply plugin: 'kotlin-android-extensions'
apply plugin: 'ktlint-config'
apply plugin: 'hockeyapp-config'
apply from: "$rootDir/gradle/coverage.gradle"

android {

    defaultConfig {
        applicationId "{{ cookiecutter.package_name }}"
        testApplicationId "{{ cookiecutter.package_name }}.test"
    }

    signingConfigs {
        develop {
            storeFile file("${project.rootDir}/keystores/{{ cookiecutter.app_name | replace(' ', '') | lower }}Develop.jks")
            storePassword propOrEmpty('STORE_PASSWORD')
            keyAlias '{{ cookiecutter.app_name | replace(' ', '') | lower }}Develop'
            keyPassword propOrEmpty('KEY_PASSWORD')
        }

        sprint {
            storeFile file("${project.rootDir}/keystores/{{ cookiecutter.app_name | replace(' ', '') | lower }}Sprint.jks")
            storePassword propOrEmpty('STORE_PASSWORD')
            keyAlias '{{ cookiecutter.app_name | replace(' ', '') | lower }}Sprint'
            keyPassword propOrEmpty('KEY_PASSWORD')
        }
        
        production {
            storeFile file('${project.rootDir}/keystores/{{ cookiecutter.app_name | replace(' ', '') | lower }}Production.jks')
            storePassword propOrEmpty('STORE_PASSWORD')
            keyAlias '{{ cookiecutter.app_name | replace(' ', '') | lower }}Production'
            keyPassword propOrEmpty('KEY_PASSWORD')
        }
    }

    flavorDimensions "track"

    productFlavors {
        develop {
            dimension "track"
            applicationIdSuffix ".develop"
            signingConfig signingConfigs.develop
        }
        sprint {
            dimension "track"
            applicationIdSuffix ".sprint"
            signingConfig signingConfigs.sprint
        }
        production {
            dimension "track"
            signingConfig signingConfigs.production
        }
    }
}

dependencies {
    androidTestImplementation Libraries.androidxEspressoCore
    androidTestImplementation Libraries.androidxEspressoContrib
    androidTestImplementation Libraries.androidxTestRules
    androidTestImplementation Libraries.androidxTestRunner
    androidTestImplementation Libraries.androidxTestExtJUnit

    implementation project(':common')
    implementation project(':domain')
    implementation project(':data')
    implementation project(':device')
    lintChecks project(':lint')

    implementation Libraries.kotlinStdlib
    implementation Libraries.androidxCore
    implementation Libraries.androidxAnnotations
    implementation Libraries.materialComponents
    implementation Libraries.androidxConstraintLayout
    implementation Libraries.androidxViewModel

    implementation Libraries.dagger
    kapt Libraries.daggerCompiler
    implementation Libraries.daggerAndroidSupport
    kapt Libraries.daggerAndroidCompiler

    implementation Libraries.rxAndroid
    implementation Libraries.rxJava
    implementation Libraries.rxRelay

    implementation Libraries.coroutinesCore
    implementation Libraries.coroutinesAndroid

    implementation Libraries.autoDisposeBase
    implementation Libraries.autoDisposeKtx
    implementation Libraries.autoDisposeJetpack
    implementation Libraries.autoDisposeJetpackKtx

    implementation Libraries.timber

    testImplementation Libraries.androidxTestExtJUnit
    testImplementation Libraries.androidxTestExtTruth
}
